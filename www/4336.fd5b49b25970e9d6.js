"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4336],{4336:(y,d,s)=>{s.r(d),s.d(d,{CommitpayPageModule:()=>_});var m=s(177),p=s(4341),r=s(1075),l=s(9860),t=s(4438),u=s(3366);function h(e,c){if(1&e&&(t.j41(0,"div")(1,"table",16)(2,"caption"),t.EFF(3,"Detalle de Pago: "),t.j41(4,"strong"),t.EFF(5,"SUCCESS PAY"),t.k0s()(),t.j41(6,"thead")(7,"tr",17),t.nrm(8,"th",18)(9,"th",18)(10,"th",18),t.k0s()(),t.j41(11,"tbody")(12,"tr")(13,"td")(14,"strong"),t.EFF(15,"Estado:"),t.k0s()(),t.j41(16,"td"),t.EFF(17),t.k0s()(),t.j41(18,"tr")(19,"td")(20,"strong"),t.EFF(21,"Fecha:"),t.k0s()(),t.j41(22,"td"),t.EFF(23),t.k0s()(),t.j41(24,"tr")(25,"td")(26,"strong"),t.EFF(27,"N\xb0 de tarjeta:"),t.k0s()(),t.j41(28,"td"),t.EFF(29),t.k0s()(),t.j41(30,"tr")(31,"td")(32,"strong"),t.EFF(33,"Tipo de Pago:"),t.k0s()(),t.j41(34,"td"),t.EFF(35),t.k0s()(),t.j41(36,"tr")(37,"td")(38,"strong"),t.EFF(39,"Monto Pagado:"),t.k0s()(),t.j41(40,"td"),t.EFF(41),t.k0s()(),t.j41(42,"tr")(43,"td")(44,"strong"),t.EFF(45,"Comprobante:"),t.k0s()(),t.j41(46,"td"),t.EFF(47),t.k0s()(),t.j41(48,"tr")(49,"td")(50,"strong"),t.EFF(51,"N\xb0 Orden:"),t.k0s()(),t.j41(52,"td"),t.EFF(53),t.k0s()()()()()),2&e){const i=t.XpG();t.R7$(17),t.JRh(i.transactionDetail.state),t.R7$(6),t.JRh(i.transactionDetail.transaction_date),t.R7$(6),t.SpI("XXXX XXXX XXXX ",i.transactionDetail.card_number,""),t.R7$(6),t.JRh(i.transactionDetail.pay_type),t.R7$(6),t.JRh(i.transactionDetail.amount),t.R7$(6),t.JRh(i.transactionDetail.authorization_code),t.R7$(6),t.JRh(i.transactionDetail.buy_order)}}function f(e,c){if(1&e&&(t.j41(0,"div")(1,"h2"),t.EFF(2),t.k0s()()),2&e){const i=t.XpG();t.R7$(2),t.JRh(i.errorMessage)}}const C=[{path:"",component:(()=>{var e;class c{constructor(o,n,a){this.router=o,this.route=n,this.apiService=a,this.showOptions=!1,this.errorMessage="",this.token_ws="",this.idCita=0,this.idPaciente=0,this.login=!1}ngOnInit(){this.route.queryParams.subscribe(o=>{this.token_ws=o.token_ws,this.idCita=JSON.parse(localStorage.getItem("idCita")||"0"),this.idPaciente=JSON.parse(localStorage.getItem("idPaciente")||"0"),this.login=JSON.parse(localStorage.getItem("login")||"false"),console.log(this.idCita),console.log(this.idPaciente),this.token_ws?this.apiService.commitTransaction(this.token_ws).subscribe(n=>{console.log("Pago Correcto"),"AUTHORIZED"===n.status&&0===n.response_code?(this.transactionDetail={card_number:n.card_detail.card_number,transaction_date:new Date(n.transaction_date).toLocaleString(),state:"AUTHORIZED"===n.status?"Aceptado":"Rechazado",pay_type:this.getPaymentType(n.payment_type_code),amount:this.formatAmount(n.amount),authorization_code:n.authorization_code,buy_order:n.buy_order},this.apiService.confirmarCita(this.idPaciente,this.idCita).subscribe(a=>{console.log("Cita Agendada Correctamente",a)},a=>{console.error("Error al agendar la cita",a)})):this.errorMessage="ERROR EN LA TRANSACCI\xd3N, SE RECHAZA LA TRANSACCI\xd3N."},n=>{this.errorMessage="ERROR EN LA TRANSACCI\xd3N, SE CANCELO EL PAGO."}):this.errorMessage="ERROR EN LA TRANSACCI\xd3N, SE CANCELO EL PAGO."})}toggleOptions(){this.showOptions=!this.showOptions}redirectTo(o){this.router.navigate([o])}goHome(){console.log("Login: ",this.login),this.login?this.router.navigate(["cliente"],{state:{login:this.login,idPaciente:this.idPaciente},replaceUrl:!0}):this.router.navigate(["home"],{replaceUrl:!0})}getPaymentType(o){return"VD"===o?"Tarjeta de D\xe9bito":"Desconocido"}formatAmount(o){return o.toLocaleString("es-CL",{style:"currency",currency:"CLP"})}}return(e=c).\u0275fac=function(o){return new(o||e)(t.rXU(l.Ix),t.rXU(l.nX),t.rXU(u.G))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-commitpay"]],decls:37,vars:2,consts:[["errorTemplate",""],[1,"toolbarheader"],["slot","start"],["slot","end"],[3,"click"],[1,"header-title"],[1,"logo-link",2,"color","#000000",3,"click"],["src","../../assets/icon/psicoagendalogo.png","alt","Logo",1,"header-logo"],[4,"ngIf","ngIfElse"],[1,"footer-content"],[1,"footer-left"],[1,"footer-center"],[1,"footer-right"],[1,"logo-link"],["name","call-outline",1,"header-logo"],["name","logo-instagram",1,"header-logo"],["id","tbl-transaction-detail"],["hidden",""],["scope","col"]],template:function(o,n){if(1&o){const a=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-buttons",2),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-buttons",3)(5,"ion-button",4),t.bIt("click",function(){return t.eBV(a),t.Njj(n.redirectTo("/home"))}),t.EFF(6,"Editar datos"),t.k0s(),t.j41(7,"ion-button",4),t.bIt("click",function(){return t.eBV(a),t.Njj(n.redirectTo("/atencionespaciente"))}),t.EFF(8,"Historial de atenciones"),t.k0s(),t.j41(9,"ion-button",4),t.bIt("click",function(){return t.eBV(a),t.Njj(n.redirectTo("/fichapaciente"))}),t.EFF(10,"Fichas clinicas"),t.k0s(),t.j41(11,"ion-button",4),t.bIt("click",function(){return t.eBV(a),t.Njj(n.redirectTo("/home"))}),t.EFF(12,"Cerrar sesi\xf3n"),t.k0s()(),t.j41(13,"ion-title",5)(14,"a",6),t.bIt("click",function(){return t.eBV(a),t.Njj(n.goHome())}),t.nrm(15,"img",7),t.EFF(16," PsicoAgenda "),t.k0s()()()(),t.j41(17,"ion-content"),t.DNE(18,h,54,7,"div",8)(19,f,3,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(21,"ion-footer")(22,"ion-toolbar")(23,"div",9)(24,"div",10)(25,"p"),t.EFF(26,"\xa92024 - PsicoAgenda APP"),t.k0s(),t.j41(27,"p"),t.EFF(28,"Todos los Derechos Reservados"),t.k0s()(),t.nrm(29,"div",11),t.j41(30,"div",12)(31,"p",13),t.nrm(32,"ion-icon",14),t.EFF(33,"Tel\xe9fono Contacto: 920256865 "),t.k0s(),t.j41(34,"p",13),t.nrm(35,"ion-icon",15),t.EFF(36,"www.instagram.com/psicoagenda"),t.k0s()()()()()}if(2&o){const a=t.sdS(20);t.R7$(18),t.Y8G("ngIf",n.transactionDetail)("ngIfElse",a)}},dependencies:[m.bT,r.Jm,r.QW,r.W9,r.M0,r.eU,r.iq,r.MC,r.BC,r.ai],styles:['@charset "UTF-8";ion-footer[_ngcontent-%COMP%]{--background: var(--ion-footer-background);color:var(--ion-footer-text-color);width:100%;padding:0;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;position:relative}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;--background: #333;color:#fff;padding:1.5rem;font-size:.8rem;text-align:center}ion-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{display:flexbox;justify-content:space-between;align-items:center;width:100%}ion-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]{flex:1;text-align:center;display:flex;flex-direction:column;justify-content:center}ion-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{text-align:right;position:absolute}ion-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-text-color);text-decoration:none}ion-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--color: var(--ion-text-color)}ion-icon[_ngcontent-%COMP%]{font-size:2em;color:#009688;width:24px;height:24px}ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--background: #32E0C4}.center-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;flex-direction:column}.horizontal-layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:stretch;width:100%;gap:1px}.card-content-md[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:400;line-height:1.5}.custom-card[_ngcontent-%COMP%]{--background: url(1600w-9JEcmfgB4FU.39aaa5c7fb12f91d.png) no-repeat center center / cover;flex:.5;margin:1%;width:100%;text-align:center}.calendario[_ngcontent-%COMP%]{margin:1%}.calendario-lista[_ngcontent-%COMP%]{margin-top:0;width:100%;text-align:center}.imagen1[_ngcontent-%COMP%]{max-width:20%;margin-left:auto;margin-right:auto;margin-top:5%}ion-card-header[_ngcontent-%COMP%]{margin-top:6%}.botonpago[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;justify-content:center;align-items:center;display:flex;max-width:20%;--background: #32E0C4;margin-top:1rem;margin-bottom:1rem}table[_ngcontent-%COMP%]{margin-top:5%;width:100%;border-collapse:collapse;box-shadow:0 2px 3px #0000001a;max-width:650px;margin-left:auto;margin-right:auto}th[_ngcontent-%COMP%]{background-color:#93a2a5;color:#fff;font-weight:700;padding:12px 15px;text-align:left}td[_ngcontent-%COMP%]{background-color:#fff;color:#666;padding:10px 15px;border-top:1px solid #ddd}tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]{background-color:#cae7e0}tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background-color:#fff}']}),c})()}];let P=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[l.iI.forChild(C),l.iI]}),c})(),_=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[m.MD,p.YN,r.bv,P]}),c})()}}]);