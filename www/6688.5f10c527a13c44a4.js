"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(A,j,_)=>{_.r(j),_.d(j,{LoginPageModule:()=>T});var C=_(177),m=_(4341),s=_(1075),f=_(9860),h=_(467),b=_(3207),e=_(4438),P=_(3366);function O(i,c){if(1&i){const t=e.RV6();e.j41(0,"ion-content")(1,"ion-card")(2,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.navigateHome())}),e.nrm(3,"ion-img",5),e.k0s(),e.j41(4,"h1"),e.EFF(5,"Iniciar Sesi\xf3n"),e.k0s(),e.j41(6,"ion-item"),e.nrm(7,"ion-label",6),e.j41(8,"ion-input",7),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_correo,o)||(r.mdl_correo=o),e.Njj(o)}),e.k0s()(),e.j41(9,"ion-item"),e.nrm(10,"ion-label",6),e.j41(11,"ion-input",8),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_contrasena,o)||(r.mdl_contrasena=o),e.Njj(o)}),e.k0s()(),e.j41(12,"ion-text",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.recuperarContrasena())}),e.EFF(13,"\xbfOlvido su Clave?"),e.k0s(),e.nrm(14,"br")(15,"br"),e.j41(16,"ion-text",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.actualizar())}),e.EFF(17,"Cambiar Clave"),e.k0s(),e.j41(18,"ion-button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.login())}),e.EFF(19,"Entrar"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.mdl_correo),e.R7$(3),e.R50("ngModel",t.mdl_contrasena)}}function M(i,c){if(1&i){const t=e.RV6();e.j41(0,"ion-content")(1,"ion-card")(2,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.navigateHome())}),e.nrm(3,"ion-img",5),e.k0s(),e.j41(4,"h2"),e.EFF(5,"Actualiza tu Contrase\xf1a"),e.k0s(),e.j41(6,"ion-item"),e.nrm(7,"ion-label",6),e.j41(8,"ion-input",7),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_correo,o)||(r.mdl_correo=o),e.Njj(o)}),e.k0s()(),e.j41(9,"ion-item"),e.nrm(10,"ion-label",6),e.j41(11,"ion-input",11),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_contrasena,o)||(r.mdl_contrasena=o),e.Njj(o)}),e.k0s()(),e.j41(12,"ion-item"),e.nrm(13,"ion-label",6),e.j41(14,"ion-input",12),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_nueva_contrasena,o)||(r.mdl_nueva_contrasena=o),e.Njj(o)}),e.k0s()(),e.j41(15,"ion-item"),e.nrm(16,"ion-label",6),e.j41(17,"ion-input",13),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_repeticion,o)||(r.mdl_repeticion=o),e.Njj(o)}),e.k0s()(),e.j41(18,"ion-text",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.volverLogin())}),e.EFF(19,"Volver"),e.k0s(),e.j41(20,"ion-button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cambiarContrasena())}),e.EFF(21,"Actualizar Clave"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.mdl_correo),e.R7$(3),e.R50("ngModel",t.mdl_contrasena),e.R7$(3),e.R50("ngModel",t.mdl_nueva_contrasena),e.R7$(3),e.R50("ngModel",t.mdl_repeticion)}}function k(i,c){if(1&i){const t=e.RV6();e.j41(0,"ion-content")(1,"ion-card")(2,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.navigateHome())}),e.nrm(3,"ion-img",5),e.k0s(),e.j41(4,"h2"),e.EFF(5,"Indica tu correo para recuperar la contrase\xf1a"),e.k0s(),e.j41(6,"ion-item"),e.nrm(7,"ion-label",6),e.j41(8,"ion-input",7),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.mdl_correo,o)||(r.mdl_correo=o),e.Njj(o)}),e.k0s()(),e.j41(9,"ion-text",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.volverLogin())}),e.EFF(10,"Volver"),e.k0s(),e.j41(11,"ion-button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.sendEmail())}),e.EFF(12,"Recuperar"),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.mdl_correo)}}const v=[{path:"",component:(()=>{var i;class c{constructor(n,o){this.router=n,this.apiService=o,this.mdl_correo="",this.mdl_contrasena="",this.mdl_nueva_contrasena="",this.mdl_repeticion="",this.lista_respuesta=[],this.contrasena="",this.correo="",this.token="",this.isAlertOpen=!1,this.isAlertOpen2=!1,this.isAlertOpen3=!1,this.alertButtons=["OK"],this.error_mensaje="",this.idTipo=0,this.idUsuario=0,this.login2=!1,this.recover=!1,this.start=!0,this.update=!1}ngOnInit(){}login(){var n=this;return(0,h.A)(function*(){if(n.isAlertOpen2=!1,n.isAlertOpen=!1,n.lista_respuesta=[],""!=n.mdl_correo&&""!=n.mdl_contrasena){console.log(n.mdl_correo),console.log(n.mdl_contrasena);try{let o=n.apiService.obtenerUsuario(n.mdl_correo,n.mdl_contrasena),r=yield(0,b.s)(o),d=JSON.stringify(r),p=JSON.parse(d);for(let l=0;l<p.length;l++)n.lista_respuesta.push(p[l]),console.log(n.lista_respuesta),n.contrasena=n.lista_respuesta[l].Contrasena,n.correo=n.lista_respuesta[l].CorreoElectronico,n.idTipo=n.lista_respuesta[l].IdTipoUsuario,n.idUsuario=n.lista_respuesta[l].IdUsuario,console.log(n.contrasena),console.log(n.correo),console.log("ID: ",n.idUsuario),n.mdl_contrasena==n.contrasena&&n.mdl_correo==n.correo?(n.login2=!0,1==n.idTipo?n.router.navigate(["cliente"],{state:{idUsuario:n.idUsuario,idTipoUsuario:n.idTipo,login:n.login2},replaceUrl:!0}):2==n.idTipo?n.router.navigate(["psicologo"],{state:{idUsuario:n.idUsuario,idTipoUsuario:n.idTipo,login:n.login2},replaceUrl:!0}):3==n.idTipo&&n.router.navigate(["admin"],{state:{idUsuario:n.idUsuario,idTipoUsuario:n.idTipo,login:n.login2},replaceUrl:!0})):(n.mdl_contrasena!=n.contrasena||n.mdl_correo!=n.correo)&&(n.isAlertOpen2=!0)}catch{n.isAlertOpen2=!0}}else n.isAlertOpen=!0})()}setOpen(n){this.isAlertOpen=n}navigateHome(){this.router.navigate(["home"],{replaceUrl:!0})}recuperarContrasena(){this.start=!1,this.recover=!0}volverLogin(){this.start=!0,this.recover=!1,this.update=!1}actualizar(){this.start=!1,this.update=!0}getRandomInt(n,o){return Math.floor(Math.random()*(o-n+1))+n}sendEmail(){var n=this;return(0,h.A)(function*(){if(n.isAlertOpen2=!1,n.isAlertOpen=!1,n.isAlertOpen3=!1,""!=n.mdl_correo){console.log(n.mdl_correo);try{let r=n.apiService.obtenerUsuario(n.mdl_correo,"1"),d=yield(0,b.s)(r),p=JSON.stringify(d),l=JSON.parse(p);for(let a=0;a<l.length;a++)if(n.lista_respuesta.push(l[a]),console.log(n.lista_respuesta),n.correo=n.lista_respuesta[a].CorreoElectronico,console.log(n.correo),n.mdl_correo==n.correo){const g=n.getRandomInt(1e5,999999).toString();n.apiService.sendEmail(n.mdl_correo,"Recuperacion de Clave PsicoAgenda","Hola!,\n\nSolicitaste recuperar tu clave, debes utilizar la clave temporal para actualizarla.\n\nClave Temporal: "+g+"\n\nTe Saluda,\nEquipo de PsicoAgenda APP.",`\n              <p>Hola!,</p>\n              <p>Solicitaste recuperar tu clave, debes utilizar la clave temporal para actualizarla.</p>\n              <p><strong>Clave Temporal: ${g}</strong></p>\n              <p>Te Saluda,</p>\n              <p>Equipo de PsicoAgenda APP.</p>\n          `).subscribe(u=>{console.log("Email Enviado Correctamente",u)},u=>{console.error("Error al enviar correo",u)}),n.apiService.guardarToken(g,n.correo).subscribe(u=>{console.log("Token Guardado Correctamente",u)},u=>{console.error("Error al guardar token",u)}),n.isAlertOpen3=!0}else(n.mdl_contrasena!=n.contrasena||n.mdl_correo!=n.correo)&&(n.isAlertOpen2=!0)}catch{n.isAlertOpen2=!0}}else n.isAlertOpen=!0})()}cambiarContrasena(){var n=this;return(0,h.A)(function*(){if(n.isAlertOpen2=!1,n.isAlertOpen=!1,n.isAlertOpen3=!1,n.lista_respuesta=[],""!=n.mdl_correo&&""!=n.mdl_contrasena&&""!=n.mdl_nueva_contrasena&&""!=n.mdl_repeticion){console.log(n.mdl_correo),console.log(n.mdl_contrasena),console.log(n.mdl_nueva_contrasena),console.log(n.mdl_repeticion);try{let r=n.apiService.obtenerUsuario(n.mdl_correo,"1"),d=yield(0,b.s)(r),p=JSON.stringify(d),l=JSON.parse(p);for(let a=0;a<l.length;a++)n.lista_respuesta.push(l[a]),console.log(n.lista_respuesta),n.token=n.lista_respuesta[a].Token,n.correo=n.lista_respuesta[a].CorreoElectronico,console.log(n.correo),console.log(n.token),console.log("ID: ",n.idUsuario),n.mdl_contrasena==n.token&&n.mdl_nueva_contrasena==n.mdl_repeticion?(n.apiService.recuperacionClave(n.mdl_correo,n.mdl_nueva_contrasena).subscribe(g=>{console.log("Contrase\xf1a Actualizada",g)},g=>{console.error("Error al actualizar contrase\xf1a ",g)}),n.isAlertOpen3=!0):(n.token!=n.token||n.mdl_nueva_contrasena!=n.mdl_repeticion)&&(n.isAlertOpen2=!0)}catch{n.isAlertOpen2=!0}}else n.isAlertOpen=!0})()}goLogin(){this.router.navigate(["login"],{replaceUrl:!0})}}return(i=c).\u0275fac=function(n){return new(n||i)(e.rXU(f.Ix),e.rXU(P.G))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-login"]],decls:6,vars:9,consts:[[4,"ngIf"],["header","Informaci\xf3n","message","No puede dejar campos vacios",3,"didDismiss","isOpen","buttons"],["header","Informaci\xf3n","message","Credenciales Invalidas",3,"didDismiss","isOpen","buttons"],["header","Informaci\xf3n","message","Contrase\xf1a Actualizada",3,"didDismiss","click","isOpen","buttons"],[2,"background-color","transparent",3,"click"],["src","../../../assets/icon/psicoagendalogo.png"],["position","floating"],["type","email","label","Correo","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Contrase\xf1a","labelPlacement","floating",3,"ngModelChange","ngModel"],[3,"click"],["expand","full",3,"click"],["type","password","label","Contrase\xf1a Temporal","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Nueva Contrase\xf1a","labelPlacement","floating",3,"ngModelChange","ngModel"],["type","password","label","Repetir Nueva Contrase\xf1a","labelPlacement","floating",3,"ngModelChange","ngModel"]],template:function(n,o){1&n&&(e.DNE(0,O,20,2,"ion-content",0)(1,M,22,4,"ion-content",0)(2,k,13,1,"ion-content",0),e.j41(3,"ion-alert",1),e.bIt("didDismiss",function(){return o.setOpen(!1)}),e.k0s(),e.j41(4,"ion-alert",2),e.bIt("didDismiss",function(){return o.setOpen(!1)}),e.k0s(),e.j41(5,"ion-alert",3),e.bIt("didDismiss",function(){return o.setOpen(!1)})("click",function(){return o.navigateHome()}),e.k0s()),2&n&&(e.Y8G("ngIf",o.start),e.R7$(),e.Y8G("ngIf",o.update),e.R7$(),e.Y8G("ngIf",o.recover),e.R7$(),e.Y8G("isOpen",o.isAlertOpen)("buttons",o.alertButtons),e.R7$(),e.Y8G("isOpen",o.isAlertOpen2)("buttons",o.alertButtons),e.R7$(),e.Y8G("isOpen",o.isAlertOpen3)("buttons",o.alertButtons))},dependencies:[C.bT,m.BC,m.vS,s.Zy,s.Jm,s.b_,s.W9,s.KW,s.$w,s.uz,s.he,s.IO,s.Gw],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--ion-color-primary: #4a90e2}ion-header[_ngcontent-%COMP%]{--background: #ffffff}ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--background: #ffffff}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;--background: #333;color:#fff;padding:1rem;font-size:.8rem;text-align:center}ion-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}ion-footer[_ngcontent-%COMP%]   .footer-left[_ngcontent-%COMP%]{flex:1;text-align:center}ion-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]{text-align:right}ion-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-text-color);text-decoration:none}ion-footer[_ngcontent-%COMP%]   .footer-right[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--color: var(--ion-text-color)}ion-icon[_ngcontent-%COMP%]{font-size:2em;margin-right:8px;color:#009688}.login-container[_ngcontent-%COMP%]{max-width:400px;margin:12.5% auto 0;padding:2rem;--background: #00BFA6;border-radius:10px;box-shadow:0 2px 4px #0000001a;font-size:1.5rem;font-weight:700;text-align:center}ion-card[_ngcontent-%COMP%]{--background: #00BFA6;--color: black;max-width:400px;padding:2rem;border-radius:10px;margin-top:10%;text-align:center;margin-left:auto;margin-right:auto}ion-item[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:10px;--background: #EEEEEE;--border-color: #EEEEEE}ion-button[_ngcontent-%COMP%]{margin-top:1rem;--background: #009688;--color: #fff}ion-content[_ngcontent-%COMP%]{--background: url(fondo_final_login.1fef84ff5e05250e.png) no-repeat center center / cover}ion-img[_ngcontent-%COMP%]{width:5rem;margin:0 auto}ion-input[_ngcontent-%COMP%]{--background: #EEEEEE;--border-color: #EEEEEE}']}),c})()}];let x=(()=>{var i;class c{}return(i=c).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.iI.forChild(v),f.iI]}),c})(),T=(()=>{var i;class c{}return(i=c).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[C.MD,m.YN,s.bv,x]}),c})()}}]);